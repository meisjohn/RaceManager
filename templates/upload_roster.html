{% extends "base.html" %}
{% block content %}
    <section class="section">
        <div class="container">
            <h1 class="title">Upload Roster</h1>

            {% if error_message %}
                <p class="notification is-danger">{{ error_message }}</p>
            {% endif %}

            {% if session['role'] == "OWNER" %}
                {% with messages = get_flashed_messages() %}
                    {% if messages %}
                        <ul class="notification is-info">
                            {% for message in messages %}
                                <li>{{ message }}</li>
                            {% endfor %}
                        </ul>
                    {% endif %}
                {% endwith %}

                <form method="POST" enctype="multipart/form-data">
                    <div class="file is-primary has-name">
                        <label class="file-label">
                            <input class="file-input" type="file" name="file">
                            <span class="file-cta">
                                <span class="file-icon">
                                    <i class="fas fa-upload"></i>
                                </span>
                                <span class="file-label">
                                    Choose a fileâ€¦
                                </span>
                            </span>
                            <span class="file-name">
                                No file chosen
                            </span>
                        </label>
                    </div>

                    <div class="field">
                        <div class="control">
                            <input class="button is-primary" type="submit" value="Upload">
                        </div>
                    </div>
                </form>

                <a href="{{ url_for('download_roster_template') }}" class="button is-link">Download Template</a>

            {% endif %}
        </div>
    </section>

    <script>
        const fileInput = document.querySelector('.file-input');
        const fileName = document.querySelector('.file-name');

        fileInput.addEventListener('change', (e) => {
            if (fileInput.files.length > 0) {
                fileName.textContent = fileInput.files[0].name;
            } else {
                fileName.textContent = "No file chosen";
            }
        });
    </script>
{% endblock %}