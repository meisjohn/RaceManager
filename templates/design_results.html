{% extends "base.html" %}
{% block content %}
    <h1>Car Design Judging Results</h1>

    {% if error_message %}
        <p class="error-message">{{error_message}}</p>
    {% endif %}

	{% if not judging_active %}
            <table>
            <thead>
                <tr>
		    <th>Patrol</th>
                    <th>Car</th>
		    <th><div style="text-align: center;">Score</div></th>
                </tr>
            </thead>
            <tbody>
                {% for patrol_id, patrol_name in patrol_names.items() %}
	    	    {% for s in sorted_scores_by_patrol[patrol_id]: %}
    			<tr>
                            <td>{{ patrol_name }}</td>
    			    <td><strong>{{ s[0].car_name }}</strong> {{s[0].first_name}} {{s[0].last_name}}</td>
			    <td><div style="text-align: center;">{{ s[1] }}</div></td>
                        </tr>
                    {% endfor %}
                {% endfor %}
                </tbody>
            </table>
	    <br>
        {% if session['role'] == "OWNER" %}
	        <a href="/open_judging"><button>Open Judging Period</button></a>
        {% endif %}
    {% else %}
	    <div style="text-align: center;"><h2>Scores will be available at the end of judging</h2></div>
	    <br>
        {% if session['role'] == "OWNER" %}
	        <a href="/close_judging"><button>Close Judging Period</button></a>
        {% elif session['role'] == "JUDGE" %}
	        <a href="/judge_design"><button>Go to Judging Forms</button></a>
        {% endif %}
	{% endif %}

{% endblock %}
