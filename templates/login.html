{% extends "base.html" %}
{% block content %}
    <section class="section">
        <div class="container">
            {% if error_message %}
                <p class="notification is-danger">{{ error_message }}</p>
            {% endif %}

            <h1 class="title">Log in with Token</h1>
            {% if not session['role'] %}
                <section class="section">
                    <h2 class="title is-4"> Owner Login</h2>
                    <div class="field">
                        <form method="POST" action="/owner_login">
                            <label class="label" for="owner_token">Owner Token:</label>
                            <div class="control">
                                <input class="input" type="text" name="owner_token" {% if owner_token %} value="{{ owner_token }}" {% endif %}>
                            </div>
                            <div class="control">
                                <input class="button is-primary" type="submit" value="Login">
                            </div>
                        </form>
                    </div>
                </section>
                <section class="section">
                    <h2 class="title is-4"> Judge Login</h2>
                    <div class="field">
                        <form method="POST" action="/judge_login">
                            <label class="label" for="judge_token">Judge Token:</label>
                            <div class="control">
                                <input class="input" type="text" name="judge_token" {% if judge_token %} value="{{ judge_token }}" {% endif %}>
                            </div>
                            <div class="control">
                                <input class="button is-primary" type="submit" value="Login">
                            </div>
                        </form>
                    </div>
                </section>
            {% endif %}

            {% if session['role'] %}
                <h1 class="title">Logged in as {{ session['role']|title }}</h1>
                <div class="field">
                    <p></p>
                    <a href="/logout" class="button is-warning">Logout</a>
                </div>
            {% endif %}

            {% if races_list %}
                <section class="section">
                    <h1 class="title is-4">Links for All Races</h1>
                    <ul>
                    {% for race in races_list %}
                        {% set race_url = request.url_root.rstrip('/') + url_for('index', race=race.id) %}
                        <li><p class="is-size-4"><strong>Race: {{ race.name }} - </strong><a href="{{ race_url }}">{{ race_url }}</a></p></li>
                    {% endfor %}
                    </ul>
                </section>
            {% endif %}

        </div>
    </section>
{% endblock %}